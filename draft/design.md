
# 設計

## 概要
### 機能
認証の機能
認可の機能は提供しないが、認可に一貫性を持たせるための支援機能は提供する
権限管理する企業と、使用者である人がいる。

### 要求
エンタープライズなアプリケーションにおいて、認証機能を単独で管理できるようにしておきたい。
企業は人に利用許可を与えることができるが、アカウントは人のものであるべき
人は物理的な人とアカウントは1対1で紐づけ、複数アカウント利用によるセキュリティの抜け道をなるべく減らしておきたい
登録容易のため、使用者が認識するキーはメールアドレスとしたいが、サロゲートキーも利用できるようにしておく。
独立性を高めるため、認可は行わないが、認可に一貫性を持たせるために、利用者の役職、役割などを示すタグは管理する
他アプリケーションから認証を呼び出すことがなるべく少なく、スケールできるようにしておく

### 物理
アプリケーションサーバとrdbを使う。
実際に運用するわけではなく、面倒なのでフロントは書かない。
実際に運用するわけではなく、面倒なのでin memory dbは使わない。
単独のurlドメインで動作することを想定する

## データ定義
ざっくり

- ユーザ
  - id
  - name
  - email address
  - bot or human
  - credencials
    - password
    - refresh token
    - access token
  - role id
- 企業
  - id
  - user id
  - name
- 権限
  - id
  - company id
  - name

## WorkFlow
work flowとして流れを記載するが、WEB API ENDPOINTも記載する

### ユーザ登録

### 企業アサイン

### ロール作成

### ロール付与

### ユーザ情報変更

### メールアドレス変更

### その他

## RdbSchema

## ApplicationModeling
RdbSchemaに習う感じだが、そっちで表現しきれないものを記載していく




