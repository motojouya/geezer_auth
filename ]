package accessToken

import (
	"time"
	"github.com/motojouya/geezer_auth/internal/model"
	"github.com/motojouya/geezer_auth/pkg/accessToken"
)

// FIXME ここに実装するでいいのか
func ModelToAccessTokenUser(user *model.User, company *model.Company) *accessToken.User {
	var company *accessToken.Company = nil
	if user.CompanyRole != nil {
		// TODO role nameいりそう
		company = accessToken.NewCompany(
			user.CompanyRole.Company.ExposeId,
			user.CompanyRole.Company.Name,
			user.CompanyRole.Role.Label,
			user.CompanyRole.Role.Name,
		)
	}

	return accessToken.NewUser(
		user.ExposeId,
		user.ExposeEmailId,
		user.Email,
		user.Name,
		user.BotFlag,
		company,
		user.UpdateDate,
	)
}
